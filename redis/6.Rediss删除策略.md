# Rediss删除策略

## 三种删除策略

* **立即删除**：对cpu不友好，时时刻刻监控key，发现过期就删除，用处理器性能换存储空间（时间换空间）

* **惰性删除**：对内存不友好，数据达到过期不做处理，等下次访问该key时，未过期返回值，已过期删除key，如果过期的key一直不被访问则一直留存（空间换时间）

* **定时删除**：定期删除策略每隔一段时间执行一次删除过期键操作，并通过限制删除操作执行的时长和频率来减少删除操作对CPU时间的影响.
  
  
  
  周期性轮询redis库中的时效性数据，采用随机抽取的策略，利用过期数据占比的方式控制删除频度
  
  特点1: CPU性能占用设置有峰值，检测频度可自定义设置
  
  特点2: 内存压力不是很大，长期占用内存的冷数据会被持续清理
  
  总结: 周期性抽查存储空间 (随机抽查，重点抽查)

## 缓存淘汰策略

**8种过期淘汰策略**

* noeviction:不会驱逐任何key

* alkeys-lru: 对所有key使用LRU算法进行娜除

* volatile-lru: 对所有设置了过期时间的key使用LRU算法进行删除

* allkeys-random:对所有key随机删除

* volatile-random:对所有设置了过期时间的key随机删除

* volatile-ttl: 删除马上要过期的key

* allkeys-lfu: 对所有key使用LFU算法进行删除

* volatile-lfu: 对所有设置了过期时间的key使用LFU算法进行删除



**2个维度：**

1. 过期键中选取

2. 所有键中选取

**4个方面：**

1. LRU：最近最少使用

2. LFU：最不经常使用

3. random：随即

4. ttl：生存时间



出厂默认内存淘汰策略noeviction，建议使用alkeys-lru

修改配置：maxmemory- policy allkeys-lru
